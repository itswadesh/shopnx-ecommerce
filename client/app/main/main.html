<link rel="stylesheet" href="bower_components/angular-loading/angular-loading.css"/>
<div class="container">
  <div infinite-scroll='scroll()' infinite-scroll-disabled='products.busy' infinite-scroll-distance='1'>

  <div class="row">
    <div class="col-sm-5">
      <ol class="breadcrumb">
          <li><a ui-sref="main" href="">Home</a></li>
          <li ng-repeat="b in breadcrumb.items | reverse">
              <a href="/" ng-if="!$last">{{b.name}}</a>
              <span ng-if="$last">{{b.name}}</span>
          </li>
      </ol>
    </div>

    <div class="col-sm-2 text-center" style="font-size:20px;">Products ({{products.items.length}})</div>

    <div class="col-sm-5 text-right">
      <ol class="breadcrumb">
        <li>Sort: </li>
        <li ng-repeat="o in sortOptions" ng-class="{active : o.val==products.sort}">
          <a href="" ng-click="sortNow(o.val);">{{o.name}}</a>
        </li>
      </ol>
    </div>
  </div>
<!-- <div class="clearfix"></div> -->
<div class="row">
  <div class="col-sm-12">
  <ul class="list-inline text-center">
    <li>Showing {{products.items.length}} products in:</li>
    <li>$<strong>{{priceSlider.min}}</strong> &nbsp;-&nbsp; $<strong>{{priceSlider.max}}</strong></li>
    <li>
      <a>
        <select ng-model="products.brand"  ng-change="navigate('Brand',products.brand);" ng-options="b.name for b in brands track by b._id" class="form-control">
            <option value="">All Brands</option>
        </select>
      </a>
    </li>
  </ul>
  </div>
</div>
<hr class="clearfix"/>

  <div class="row">

  <div class="col-sm-3">
    <div class="well">
  Price Range:
  <rzslider
    rz-slider-floor="priceSlider.floor"
    rz-slider-ceil="priceSlider.ceil"
    rz-slider-model="priceSlider.min"
    rz-slider-high="priceSlider.max"
    rz-slider-translate="currencyFormatting"
    rz-slider-on-end="filterPrice(priceSlider)"></rzslider>

   $<strong>{{priceSlider.min}}</strong> &nbsp;-&nbsp; $<strong>{{priceSlider.max}}</strong>
</div>

<br/>
<div class="well">
      <h4>Select Brands</h4>
      <div class="nav-search" id="nav-search">
              <span class="input-icon">
                  <input placeholder="Filter Brands ..." class="nav-search-input" ng-model="filterBrand" autocomplete="off" type="text" autofocus>
                  <i class="search-icon fa fa-search nav-search-icon"></i>
              </span>
      </div>
      <hr/>
      <div class="checkbox" ng-repeat="b in brands | filter:filterBrand">
          <label class="checkbox">
          <input type="checkbox" value="{{b.name}}" checklist-model="fl.brands" checklist-value="b._id" ng-click="filterBrands(b._id);" />
          {{b.name}}<span>&nbsp;</span>
          </label>
      </div>
</div>

  </div>

  <div class="col-sm-9">

<div class="box" dw-loading="products">

  <div class="itemB" ng-repeat="product in products.items">
      <div class="itemImage">
          <a ui-sref="productDetail({id:product._id, slug:product.slug})">
            <img src="/assets/img/{{product.variants[0].image}}" alt="{{product.name}}" width="140" height="140">
<!-- src="http://s.angularcode.com/img/{{product.variants[0].image}}" -->
          </a>
      </div>
  <!-- /{{product.category}}/{{product.variants[0].image}} -->
      <div class="itemName">
          <a ui-sref="productDetail({id:product._id, slug:product.slug})">
              <span>{{product.name}}  </span>
          </a><span class="packing">{{product.variants[0].size}}</span>
      </div>

      <div class="itemPrice">
          <span>{{product.variants[0].price | currency : '$'}}</span> <span class="slash" ng-if="product.variants[0].price!=product.variants[0].mrp">{{product.variants[0].mrp | currency : '$'}}</span>
      </div>

      <div class="addButton">
          <img src="/assets/images/addtocartred.png" class="addButton" alt="Add" ng-click="cart.addItem(product._id, product.name, product.variants[0].mrp, product.variants[0].price, 1, product.variants[0].image,product.category, product.variants[0].size ,true);" ng-show="checkCart(product._id)">

          <img src="/assets/images/deletered.png" class="decrease" alt="Add" ng-click="cart.addItem(product._id, product.name, product.variants[0].mrp, product.variants[0].price, -1)" ng-hide="checkCart(product._id)">

          <span class="counter" style="display: inline-block;" ng-hide="checkCart(product._id)">{{getQuantity(product._id);}}</span>

          <img src="/assets/images/addedred.png" class="increase" alt="Remove" ng-click="cart.addItem(product._id, product.name, product.variants[0].mrp, product.variants[0].price, +1)" ng-hide="checkCart(product._id)">
      </div>
  </div>
</div>
  <!-- <div ng-show='products.busy'>Loading data...</div> -->

</div> <!-- infinite-scroll -->


  </div>
  </div>
</div>

<footer class="footer">
  <div class="container">
      <p>ShopNx | Shopping Website created with MongoDB, Express, AngularJS, NodeJS (MEAN Stack)<br/>
        Using yeoman for scaffolding and grunt to automate javascript tasks
        <a href="https://twitter.com/itswadesh">@itswadesh</a>
      </p>
  </div>
</footer>
